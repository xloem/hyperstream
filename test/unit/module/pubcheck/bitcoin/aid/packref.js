const test = require('ava')
const { packageReference } = require('module/pubcheck/bitcoin/aid')

test('success', t => {
  const hash = Buffer.from([
    0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x10,
    0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x10,
    0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x10,
    0x01, 0x02
  ])
  const checkpoint = { rootsHash: hash }
  const txid = Buffer.from([ 0xaa, 0xbb, 0xcc ])
  const expectedMessage = { hash, txid }
  const message = packageReference(checkpoint, txid)
  t.deepEqual(message, expectedMessage)
})
